(this["webpackJsonprelics-app"]=this["webpackJsonprelics-app"]||[]).push([[0],{10:function(e,t,a){e.exports=a(19)},15:function(e,t,a){},16:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(9),i=a.n(s),o=(a(15),a(1)),c=a(2),l=a(3),u=a(4),d=(a(16),a(6));function m(e,t){return e.journalState.entries.push({entry:t,entryType:"COMMON"}),e.journalState.entries.length>=25&&e.journalState.entries.shift(),e}function h(e,t){return e.journalState.entries.push(t),e.journalState.entries.length>=25&&e.journalState.entries.shift(),e}var v=function e(){Object(o.a)(this,e),this.resourceState=new p,this.jobAssignments=new f,this.journalState=new g,this.saveTime=new Date,this.settings=new b,this.achievements=new S,this.researchState=new y},p=function e(){Object(o.a)(this,e),this.relics=0,this.relicCap=0,this.relicRate=0,this.relicGenerator=0,this.sheds=0,this.students=0,this.knowledge=0,this.knowledgeRate=0,this.blood=0,this.bloodRate=0,this.money=0,this.moneyRate=0,this.moneyCap=0,this.fame=0,this.whispers=0},f=function e(){Object(o.a)(this,e),this.gatherRelics=0,this.studyRelics=0,this.giftShop=0},g=function e(){Object(o.a)(this,e),this.entries=[{entry:"The new dig site lays before me, I wonder what treasures lay yet unearthed?",entryType:"COMMON"}]},b=function e(){Object(o.a)(this,e),this.darkMode=!0},S=function e(){Object(o.a)(this,e),this.labUnlocked=!1},y=function e(){Object(o.a)(this,e),this.studentKnowledge=!1,this.profiteering=!1,this.betterShovels=!1,this.bloodWard=!1,this.mapTheGrounds=!1,this.tours=!1};function k(){return!!localStorage.getItem("RelicsSave")}function j(){var e=localStorage.getItem("RelicsSave");return function(e){var t=Object(d.a)({},new v,{},e);return t.resourceState=Object(d.a)({},t.resourceState,{},e.resourceState),t.jobAssignments=Object(d.a)({},t.jobAssignments,{},e.jobAssignments),t.journalState=Object(d.a)({},t.journalState,{},e.journalState),t.saveTime=e.saveTime,t.settings=Object(d.a)({},t.settings,{},e.settings),t.achievements=Object(d.a)({},t.achievements,{},e.achievements),t.researchState=Object(d.a)({},t.researchState,{},e.researchState),t}(e?JSON.parse(atob(e)):null)}function E(){return new v}function O(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.saveTime=new Date,t&&m(e,"Game Saved"),localStorage.setItem("RelicsSave",btoa(JSON.stringify(e)))}var T=function e(){Object(o.a)(this,e)};T.isValidPurchase=function(e,t){return!1},T.commitTransaction=function(e,t){return e},T.updateClock=!1;var N=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return a}(T);N.isAvailable=function(e){return!1},N.buildTooltip=function(e){return"MISSING TOOLTIP"},N.title="MISSING TITLE",N.className="",N.id="";var w=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).updateClock=!1,e}return Object(c.a)(a,null,[{key:"commitTransaction",value:function(e,t){if(a.isValidPurchase(e,t)){var n=a.getCost(e,t);e.resourceState.relics-=n,e.resourceState.students+=t}return e}},{key:"isValidPurchase",value:function(e,t){var n=a.getCost(e,t);return e.resourceState.relics>=n}},{key:"getCost",value:function(e,t){for(var a=0,n=e.resourceState.students||0,r=0;r<t;r++)a+=10+5*n,n++;return a}},{key:"buildTooltip",value:function(e){return r.a.createElement("div",{className:"relics-tooltip"},r.a.createElement("div",{className:"relics-tooltip__description"},"Hire some students to dust off relics for you. They work for relics."),r.a.createElement("div",{className:"relics-tooltip__cost"},r.a.createElement("div",null,"Relics: ",a.getCost(e,1))))}}]),a}(T);function C(e,t){t.jobAssignments.gatherRelics-=e,t.jobAssignments.gatherRelics<0&&(t.jobAssignments.gatherRelics=0)}function A(e,t){_(t)>=e&&(t.jobAssignments.studyRelics+=e)}function R(e,t){t.jobAssignments.studyRelics-=e,t.jobAssignments.studyRelics<0&&(t.jobAssignments.studyRelics=0)}function _(e){var t=(e.jobAssignments.gatherRelics||0)+(e.jobAssignments.studyRelics||0);return e.resourceState.students-t}var P=a(7),I=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.tooltip,a=e.id,n=e.children,s=e.disabled,i=e.onClick,o="relics-button";s&&(o+=" relics-button--disabled"),e.compact&&(o+=" relics-button--compact"),this.props.className&&(o+=" "+this.props.className);var c=s?function(){}:i,l={};return t&&(l["data-tip"]="",l["data-for"]=a),r.a.createElement("span",Object.assign({},l,{id:a,key:a,className:o,onClick:c}),n,t&&r.a.createElement(P.a,{id:a,key:a,place:"bottom",effect:"solid"},t))}}]),a}(r.a.Component),M=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.tooltip,n=e.children,s=e.assignWorkers,i=e.removeWorkers,o=e.currentlyAssigned,c=e.availableWorkers,l={};return a&&(l["data-tip"]="",l["data-for"]=t),r.a.createElement("span",Object.assign({},l,{id:t}),n,": ",o||0,r.a.createElement("span",null,r.a.createElement(I,{compact:!0,disabled:o<=0,onClick:function(){return i(1)}},"-"),r.a.createElement(I,{compact:!0,disabled:c<=0,onClick:function(){return s(1)}},"+"),r.a.createElement(I,{compact:!0,disabled:c<=0,onClick:function(){return s(c)}},r.a.createElement("u",null,"+"))),a&&r.a.createElement(P.a,{id:t,place:"bottom",effect:"solid"},a))}}]),a}(r.a.Component),V=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).updateClock=!1,e}return Object(c.a)(a,null,[{key:"commitTransaction",value:function(e,t){if(a.isValidPurchase(e,t)){var n=a.getCost(e,t);e.resourceState.money-=n,e.resourceState.sheds+=t}return e}},{key:"isValidPurchase",value:function(e,t){var n=a.getCost(e,t);return e.resourceState.money>=n}},{key:"getCost",value:function(e,t){for(var a=0,n=e.resourceState.sheds||0,r=0;r<t;r++)a+=5+15*n,n++;return a}},{key:"buildTooltip",value:function(e){return r.a.createElement("div",{className:"relics-tooltip"},r.a.createElement("div",{className:"relics-tooltip__description"},"It turns out we don't need to keep our relics in a pile under a tarp.",r.a.createElement("br",null),"+50 relic storage."),r.a.createElement("div",{className:"relics-tooltip__cost"},r.a.createElement("div",{className:"money-text"},"Money: ",a.getCost(e,1))))}}]),a}(T),x=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.gameState,r=t.onAddCurrency,s=t.onPurchase,i=_(a),o=a.resourceState.students>=1;return n.createElement("div",{className:"panel--left-align"},n.createElement("div",{className:"button-container"},n.createElement(I,{onClick:function(){return r("relics",1)}},"Look for relics")),o&&n.createElement(M,{assignWorkers:function(t){return function(e,t){_(t)>=e&&(t.jobAssignments.gatherRelics+=e)}(t,e.props.gameState)},removeWorkers:function(t){return C(t,e.props.gameState)},currentlyAssigned:a.jobAssignments.gatherRelics,availableWorkers:i},"Gathering Relics"),a.researchState.tours&&n.createElement("div",null,n.createElement(M,{assignWorkers:function(t){return function(e,t){_(t)>=e&&(t.jobAssignments.giftShop+=e)}(t,e.props.gameState)},removeWorkers:function(t){return function(e,t){t.jobAssignments.giftShop-=e,t.jobAssignments.giftShop<0&&(t.jobAssignments.studyRelics=0)}(t,e.props.gameState)},currentlyAssigned:a.jobAssignments.giftShop,availableWorkers:i},"Gift Shop")),n.createElement("br",null),n.createElement("div",null,n.createElement("div",{className:"button-container"},n.createElement(I,{disabled:!w.isValidPurchase(a,1),onClick:function(){return s(1,w.commitTransaction)},id:"hireStudent",tooltip:w.buildTooltip(a)},"Hire a Student")),a.researchState.profiteering&&n.createElement("p",null,"Buildings:"),a.researchState.profiteering&&n.createElement(I,{disabled:!V.isValidPurchase(a,1),onClick:function(){return s(1,V.commitTransaction)},id:"shed",tooltip:V.buildTooltip(a)},"Storage Shed: ",a.resourceState.sheds)))}}]),a}(n.Component),W={light:{themeClass:"app app--light"},dark:{themeClass:"app app--dark"}},G=r.a.createContext({theme:W.dark,toggleTheme:function(){}}),D=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"onToggleTheme",value:function(e){var t=this.props.gameState;t.settings.darkMode=!t.settings.darkMode,e()}},{key:"render",value:function(){var e=this,t=this.props,a=t.onSave,n=t.onClearSave;return r.a.createElement("div",null,r.a.createElement("div",{className:"button-container"},r.a.createElement(I,{onClick:function(){return a()}},"Save"),r.a.createElement(I,{onClick:function(){return n()}},"Clear Save")),r.a.createElement("div",null,r.a.createElement(G.Consumer,null,(function(t){t.theme;var a=t.toggleTheme;return r.a.createElement("div",{className:"button-container"},r.a.createElement(I,{onClick:function(){return e.onToggleTheme(a)}},"Toggle Dark Mode"))}))),r.a.createElement("p",null,"Relics - A game by bearhanded."),r.a.createElement("p",null,r.a.createElement("a",{href:"https://github.com/bearhanded/relics"},"GitHub")))}}]),a}(r.a.Component);function B(e){var t=Math.floor(100*Math.random()+1);t>=95&&m(e,"The wind blows across the dusty plain"),10<=t&&t<=15&&(m(e,"A stranger shuffles up and hands something to you: +100 Relics!"),e.resourceState.relics+=100),1===t&&e.resourceState.students>2&&(e.researchState.bloodWard?(e.resourceState.blood?e.resourceState.blood++:e.resourceState.blood=1,h(e,{entry:"The ward protects the student in exchange for a drop shed.",entryType:"BLOOD"})):(_(e)<=0&&(e.jobAssignments.gatherRelics>=1?C(1,e):e.jobAssignments.studyRelics>=1&&R(1,e)),e.resourceState.blood?e.resourceState.blood++:e.resourceState.blood=1,e.resourceState.students-=1,h(e,{entry:"A shout in the dark. You are short one student.",entryType:"BLOOD"})))}var L=function(){function e(t,a){Object(o.a)(this,e),this.saveClockId=void 0,this.resourceClockId=void 0,this.gameState=void 0,this.tickRatio=void 0,this.emitTick=void 0,this.maxTicks=void 0,this.lastTickDate=void 0,this.randomEventTimer=0,this.saveClockId=setInterval((function(){return O(t)}),3e4),this.gameState=t,this.updateState(t),this.tickRatio=.05,this.maxTicks=100,this.emitTick=a,this.lastTickDate=new Date(t.saveTime)}return Object(c.a)(e,[{key:"calibrate",value:function(){var e=new Date,t=(e.getTime()-this.lastTickDate.getTime())/1e3;this.lastTickDate=e,this.tickRatio=t,this.randomEventTimer+=t}},{key:"manageRandomEvent",value:function(e){this.randomEventTimer>=5&&(!function(e,t){for(var a=0;a<t;a++)B(e)}(e,Math.floor(this.randomEventTimer/5)),this.randomEventTimer=0)}},{key:"tick",value:function(){this.calibrate();var e=Object(d.a)({},this.gameState),t=0,a=0,n=0;if(this.gameState.jobAssignments.gatherRelics){var r=1+(this.gameState.researchState.betterShovels?.5:0);t=.5*this.gameState.jobAssignments.gatherRelics*r}this.gameState.jobAssignments.studyRelics&&this.gameState.resourceState.relics>=10*this.gameState.jobAssignments.gatherRelics*this.tickRatio&&(t-=10*this.gameState.jobAssignments.studyRelics,a=.1*this.gameState.jobAssignments.studyRelics);this.gameState.researchState.profiteering&&(n=.25,this.gameState.jobAssignments.giftShop&&(n+=.125*this.gameState.jobAssignments.giftShop,t-=2.5*this.gameState.jobAssignments.giftShop)),e.resourceState.money+=n*this.tickRatio,e.resourceState.relics+=t*this.tickRatio,e.resourceState.knowledge+=a*this.tickRatio;var s=100+50*this.gameState.resourceState.sheds;e.resourceState.relics>=s&&(e.resourceState.relics=s),e.resourceState.relicCap=s;e.resourceState.money>=50&&(e.resourceState.money=50),e.resourceState.moneyCap=50,e.resourceState.relicRate=t,e.resourceState.moneyRate=n,e.resourceState.knowledgeRate=a,this.manageRandomEvent(e),this.gameState=e,this.emitTick(e)}},{key:"updateState",value:function(e){var t=this;clearInterval(this.resourceClockId),this.resourceClockId=setInterval((function(){return t.tick()}),50)}},{key:"clearClock",value:function(){clearInterval(this.resourceClockId),clearInterval(this.saveClockId)}}]),e}(),K=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"getClassName",value:function(e){var t="padded-text journal__entry";switch(e.entryType){case"ACHIEVEMENT":t+=" journal__entry--achievement";break;case"BLOOD":t+=" blood-text"}return t}},{key:"render",value:function(){var e=this,t=this.props,a=t.journalState,r=t.clearLog,s=a.entries.slice(0).reverse().map((function(t){return n.createElement("div",{className:e.getClassName(t)},t.entry)}));return n.createElement("div",{className:"panel--left-align journal-panel"},n.createElement("div",{className:"button-container"},n.createElement(I,{onClick:function(){return r()}},"Clear Log")),n.createElement("div",{className:"journal"},s))}}]),a}(n.Component),H=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=void 0!==this.props.rate&&0!==this.props.rate,t=this.props.rate+"/s";void 0!==this.props.cap&&this.props.cap;return n.createElement("div",{className:"resources__entry"},n.createElement("div",{className:this.props.className},this.props.children,this.props.cap&&n.createElement("span",{className:"resources__rate"},"/",this.props.cap)),n.createElement("div",{className:"resources__rate"},e&&t))}}]),a}(n.Component),F=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.gameState;return n.createElement("div",null,n.createElement("div",{className:"panel--center-align resources__container"},!!e.resourceState.relics&&n.createElement(H,{rate:e.resourceState.relicRate,cap:e.resourceState.relicCap},"Relics: ",e.resourceState.relics.toFixed()),e.researchState.profiteering&&n.createElement(H,{className:"money-text",rate:e.resourceState.moneyRate,cap:e.resourceState.moneyCap},"Money: ",e.resourceState.money.toFixed()),!!e.resourceState.knowledge&&n.createElement(H,{className:"knowledge-text",rate:e.resourceState.knowledgeRate},"Knowledge: ",e.resourceState.knowledge.toFixed()),!!e.resourceState.blood&&n.createElement(H,{className:"blood-text"},"Blood: ",e.resourceState.blood.toFixed())),!!e.resourceState.students&&n.createElement("div",{className:"panel--center-align resources__container"},n.createElement("div",null,"Students: ",_(e),"/",e.resourceState.students)))}}]),a}(n.Component),J=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e="nav-button";this.props.disabled&&(e+=" nav-button--disabled"),this.props.selected&&(e+=" nav-button--selected");var t=this.props.disabled?function(){}:this.props.onClick;return r.a.createElement("span",{className:e,onClick:t},this.props.children)}}]),a}(r.a.Component),U=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.onChangePanel,a=e.selected,n=e.gameState;return r.a.createElement("div",{className:"nav-panel"},r.a.createElement(J,{selected:"GENERATORS"===a,onClick:function(){return t("GENERATORS")}},"Dig Site 1"),(n.resourceState.students>=10||n.achievements.labUnlocked)&&r.a.createElement(J,{selected:"LAB"===a,onClick:function(){return t("LAB")}},"Research Lab"),r.a.createElement(J,{selected:"SETTINGS"===a,onClick:function(){return t("SETTINGS")}},"Settings"))}}]),a}(r.a.Component);var Y=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,null,[{key:"commitTransaction",value:function(e,t){if(a.isValidPurchase(e,t)){var n=a.getCost(e,t);e.resourceState.relics-=n,e.resourceState.knowledge+=t}return e}},{key:"isValidPurchase",value:function(e,t){var n=a.getCost(e,t);return e.resourceState.relics>=n}},{key:"getCost",value:function(e,t){return 100*t}},{key:"buildTooltip",value:function(e){return r.a.createElement("div",{className:"relics-tooltip"},r.a.createElement("div",{className:"relics-tooltip__description"},"Peruse your collection, perhaps you can find something useful."),r.a.createElement("div",{className:"relics-tooltip__cost"},r.a.createElement("div",null,"Relics: 100")))}}]),a}(T);Y.updateClock=!1;var $=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,null,[{key:"commitTransaction",value:function(e,t){return a.isValidPurchase(e,t)&&(e.resourceState.money-=25,e.researchState.betterShovels=!0,h(e,{entry:"A patron finds your work interesting, and provides a slow but steady drip of funding.",entryType:"ACHIEVEMENT"})),e}},{key:"isValidPurchase",value:function(e,t){return e.resourceState.money>=25}},{key:"buildTooltip",value:function(e){return r.a.createElement("div",{className:"relics-tooltip"},r.a.createElement("div",{className:"relics-tooltip__description"},"Buy the team their very first shovel. It's better than none.",r.a.createElement("br",null),"Student base gathering rate +.5 relics/s"),r.a.createElement("div",{className:"relics-tooltip__cost"},r.a.createElement("div",{className:"money-text"},"Money: 25")))}},{key:"isAvailable",value:function(e){return e.researchState.profiteering&&!e.researchState.betterShovels}}]),a}(N);$.updateClock=!1,$.title="Better Shovels",$.id="better-shovels",$.className="money-button";var q=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,null,[{key:"commitTransaction",value:function(e,t){return a.isValidPurchase(e,t)&&(e.resourceState.relics-=100,e.resourceState.blood-=1,e.resourceState.knowledge-=20,e.researchState.bloodWard=!0,h(e,{entry:"Following instructions on the ruins, you assemble a ward. That should protect this place.",entryType:"BLOOD"})),e}},{key:"isValidPurchase",value:function(e,t){return e.resourceState.blood>=1&&e.resourceState.knowledge>=20&&e.resourceState.relics>=100}},{key:"buildTooltip",value:function(e){return r.a.createElement("div",{className:"relics-tooltip"},r.a.createElement("div",{className:"relics-tooltip__description"},"The excavated ruins are carved with a repeating pattern, and no one has disappeared in there yet."),r.a.createElement("div",{className:"relics-tooltip__cost"},r.a.createElement("div",null,"Relics: 100"),r.a.createElement("div",{className:"knowledge-text"},"Knowledge: 20"),r.a.createElement("div",{className:"blood-text"},"Blood: 1")))}},{key:"isAvailable",value:function(e){return e.researchState.profiteering&&!e.researchState.bloodWard}}]),a}(N);q.updateClock=!1,q.title="Inscribe a ward",q.id="blood-ward",q.className="blood-button";var z=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,null,[{key:"commitTransaction",value:function(e,t){return a.isValidPurchase(e,t)&&(e.resourceState.knowledge-=10,e.researchState.profiteering=!0,h(e,{entry:"A patron finds your work interesting, and provides a slow but steady drip of funding.",entryType:"ACHIEVEMENT"})),e}},{key:"isValidPurchase",value:function(e,t){return e.resourceState.knowledge>=10}},{key:"buildTooltip",value:function(e){return r.a.createElement("div",{className:"relics-tooltip"},r.a.createElement("div",{className:"relics-tooltip__description"},"With your student's help, you know enough now to fund this endeavor. A little embellishment never hurt..."),r.a.createElement("div",{className:"relics-tooltip__cost"},r.a.createElement("div",{className:"knowledge-text"},"Knowledge: 10")))}},{key:"isAvailable",value:function(e){return e.researchState.studentKnowledge&&!e.researchState.profiteering}}]),a}(N);z.updateClock=!1,z.title="Procure Funding",z.id="profiteering",z.className="money-button";var Q=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,null,[{key:"commitTransaction",value:function(e,t){return a.isValidPurchase(e,t)&&(e.resourceState.knowledge-=5,e.researchState.studentKnowledge=!0),e}},{key:"isValidPurchase",value:function(e,t){return e.resourceState.knowledge>=5}},{key:"buildTooltip",value:function(e){return r.a.createElement("div",{className:"relics-tooltip"},r.a.createElement("div",{className:"relics-tooltip__description"},"I know enough about this to teach others to do the work, albeit at a reduced efficiency."),r.a.createElement("div",{className:"relics-tooltip__cost"},r.a.createElement("div",{className:"knowledge-text"},"Knowledge: 5")))}},{key:"isAvailable",value:function(e){return!e.researchState.studentKnowledge}}]),a}(N);Q.updateClock=!1,Q.title="Studious Students",Q.id="student-knowledge",Q.className="knowledge-button";var X=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,null,[{key:"commitTransaction",value:function(e,t){return a.isValidPurchase(e,t)&&(e.resourceState.knowledge-=1,e.researchState.mapTheGrounds=!0),e}},{key:"isValidPurchase",value:function(e,t){return e.resourceState.knowledge>=1}},{key:"buildTooltip",value:function(e){return r.a.createElement("div",{className:"relics-tooltip"},r.a.createElement("div",{className:"relics-tooltip__description"},"These relics seem to be found near a few particular features.",r.a.createElement("br",null),"Increases manual base relic search rate by 1."),r.a.createElement("div",{className:"relics-tooltip__cost"},r.a.createElement("div",{className:"knowledge-text"},"Knowledge: 1")))}},{key:"isAvailable",value:function(e){return!e.researchState.mapTheGrounds}}]),a}(N);X.updateClock=!1,X.title="Map the Ruins",X.id="map-ruins",X.className="knowledge-button";var Z=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,null,[{key:"commitTransaction",value:function(e,t){return a.isValidPurchase(e,t)&&(e.resourceState.knowledge-=25,e.researchState.tours=!0,h(e,{entry:"Wait, people will pay to see this place?",entryType:"COMMON"})),e}},{key:"isValidPurchase",value:function(e,t){return e.resourceState.knowledge>=25}},{key:"buildTooltip",value:function(e){return r.a.createElement("div",{className:"relics-tooltip"},r.a.createElement("div",{className:"relics-tooltip__description"},"You form a committee of students to think very hard about how to make more money."),r.a.createElement("div",{className:"relics-tooltip__cost"},r.a.createElement("div",{className:"knowledge-text"},"Knowledge: 25")))}},{key:"isAvailable",value:function(e){return e.researchState.betterShovels&&!e.researchState.tours}}]),a}(N);Z.updateClock=!1,Z.title="More funding",Z.id="tours",Z.className="money-button";var ee=[$,q,z,Q,X,Z];var te=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.gameState,a=e.research,n=e.onPurchase;return r.a.createElement(I,{disabled:!a.isValidPurchase(t,1),onClick:function(){return n(1,a.commitTransaction)},id:a.id,key:a.id,className:a.className,tooltip:a.buildTooltip(t)},a.title)}}]),a}(r.a.Component),ae=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).assignStudentsStudy=function(t){return A(t,e.props.gameState)},e.removeStudentsStudy=function(t){return R(t,e.props.gameState)},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e;(e=this.props.gameState).achievements.labUnlocked||(e.achievements.labUnlocked=!0,h(e,{entry:"With your new found stash of relics, you retreat to your personal laboratory!",entryType:"ACHIEVEMENT"}))}},{key:"createResearchButton",value:function(e){return r.a.createElement(te,{key:e.id,research:e,gameState:this.props.gameState,onPurchase:this.props.onPurchase})}},{key:"render",value:function(){var e=this,t=this.props,a=t.gameState,n=t.onPurchase,s=_(a),i=function(e){return ee.filter((function(t){return t.isAvailable(e)}))}(a).map((function(t){return e.createResearchButton(t)}));return r.a.createElement("div",null,r.a.createElement("div",{className:"button-container"},r.a.createElement(I,{disabled:!Y.isValidPurchase(a,1),onClick:function(){return n(1,Y.commitTransaction)},id:"studyRelics",tooltip:Y.buildTooltip(a)},"Study Relics")),a.researchState.studentKnowledge&&r.a.createElement("div",null,r.a.createElement(M,{id:"studentsStudying",assignWorkers:function(t){return e.assignStudentsStudy(t)},removeWorkers:function(t){return e.removeStudentsStudy(t)},currentlyAssigned:a.jobAssignments.studyRelics,availableWorkers:s,tooltip:"Produces 1 knowledge per 100 relics."},"Student Studying Relics")),r.a.createElement("div",null,r.a.createElement("p",null,"Research"),i))}}]),a}(r.a.Component),ne=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).clock=void 0,e.state={gameState:k()?j():E(),activePanel:"GENERATORS"},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.clock=new L(this.state.gameState,(function(t){return e.onTick(t)})),this.setState({activePanel:"GENERATORS"})}},{key:"onTick",value:function(e){this.setState({gameState:e})}},{key:"addCurrency",value:function(e,t){var a=Object(d.a)({},this.state.gameState),n=t;this.state.gameState.researchState.mapTheGrounds&&(n+=1),a.resourceState.relics+=n,m(a,"You dust off some potsherds."),this.setState({gameState:a})}},{key:"makePurchase",value:function(e,t){var a=Object(d.a)({},this.state.gameState);a=t(a,e),this.setState({gameState:a})}},{key:"clearLog",value:function(){this.state.gameState.journalState.entries=[]}},{key:"changeActivePanel",value:function(e){this.setState({activePanel:e})}},{key:"save",value:function(){var e=Object(d.a)({},this.state.gameState);this.setState({gameState:e}),O(e,!0)}},{key:"clearSave",value:function(){if(confirm("Are you sure you want to clear your save?")){this.clock.clearClock();var e=E();e.saveTime=new Date,this.setState({gameState:e}),O(e),location.reload()}}},{key:"render",value:function(){var e,t=this;switch(this.state.activePanel){case"SETTINGS":e=n.createElement(D,{gameState:this.state.gameState,onSave:function(){return t.save()},onClearSave:function(){return t.clearSave()}});break;case"LAB":e=n.createElement(ae,{gameState:this.state.gameState,onPurchase:function(e,a){return t.makePurchase(e,a)}});break;case"GENERATORS":default:e=n.createElement(x,{gameState:this.state.gameState,onAddCurrency:function(e,a){return t.addCurrency(e,a)},onPurchase:function(e,a){return t.makePurchase(e,a)}})}return n.createElement("div",{className:"core-panel"},n.createElement("div",{className:"core-panel__flex"},n.createElement("div",{className:"core-panel__left-column"},n.createElement(K,{clearLog:function(){return t.clearLog()},journalState:this.state.gameState.journalState})),n.createElement("div",{className:"core-panel__center-column"},n.createElement(U,{onChangePanel:function(e){return t.changeActivePanel(e)},selected:this.state.activePanel,gameState:this.state.gameState}),e),n.createElement("div",{className:"core-panel__right-column"},n.createElement(F,{gameState:this.state.gameState}))))}}]),a}(n.Component),re=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;Object(o.a)(this,a),(n=t.call(this,e)).state=void 0,n.toggleTheme=void 0;var r=k()&&j().settings.darkMode;return n.toggleTheme=function(){n.setState((function(e){return{theme:e.theme===W.dark?W.light:W.dark}}))},n.state={theme:r?W.dark:W.light,toggleTheme:n.toggleTheme},n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(G.Provider,{value:this.state},r.a.createElement("div",{className:this.state.theme.themeClass},r.a.createElement(ne,null)))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[10,1,2]]]);
//# sourceMappingURL=main.c3441c32.chunk.js.map